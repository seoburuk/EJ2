# ê²Œì‹œíŒ ë° ëŒ“ê¸€ ê¸°ëŠ¥ ê°œì„  v2 (2026-02-10)

## ê°œìš”
ê²Œì‹œíŒê³¼ ëŒ“ê¸€ ì‹œìŠ¤í…œì˜ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ê¸° ìœ„í•´ ì¢‹ì•„ìš”/ì‹«ì–´ìš” í† ê¸€ ë° ìƒí˜¸ë°°íƒ€ ì²˜ë¦¬, ì¡°ê±´ë¶€ ëŒ“ê¸€ ì‚­ì œ ì „ëµì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

---

## ë³€ê²½ ì‚¬í•­

### 1. ê²Œì‹œê¸€ ì¢‹ì•„ìš”/ì‹«ì–´ìš” - í† ê¸€ & ìƒí˜¸ë°°íƒ€ ì²˜ë¦¬

#### ë³€ê²½ ê°œìš”
- **í† ê¸€ ê¸°ëŠ¥**: ê°™ì€ ë²„íŠ¼ì„ ë‘ ë²ˆ í´ë¦­í•˜ë©´ ë°˜ì‘ ì·¨ì†Œ (YouTube, Reddit ìŠ¤íƒ€ì¼)
- **ìƒí˜¸ë°°íƒ€**: ì¢‹ì•„ìš” í´ë¦­ ì‹œ ê¸°ì¡´ ì‹«ì–´ìš” ìë™ ì·¨ì†Œ (ë°˜ëŒ€ë„ ë§ˆì°¬ê°€ì§€)
- **UI í”¼ë“œë°±**: í™œì„±í™”ëœ ë²„íŠ¼ ì‹œê°ì  í‘œì‹œ

#### ë³€ê²½ ì „
- ì¢‹ì•„ìš”ì™€ ì‹«ì–´ìš”ê°€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘
- í•œ ì‚¬ìš©ìê°€ ê°™ì€ ê²Œì‹œê¸€ì— ì¢‹ì•„ìš”ì™€ ì‹«ì–´ìš”ë¥¼ ëª¨ë‘ ëˆ„ë¥¼ ìˆ˜ ìˆìŒ
- í•œ ë²ˆ ëˆ„ë¥´ë©´ ì·¨ì†Œ ë¶ˆê°€ëŠ¥ (ì˜êµ¬ì )
- ë²„íŠ¼ ìƒíƒœ ì‹œê°ì  í‘œì‹œ ì—†ìŒ

#### ë³€ê²½ í›„
- ì¢‹ì•„ìš”/ì‹«ì–´ìš” ì¤‘ **í•˜ë‚˜ë§Œ** í™œì„±í™” ê°€ëŠ¥
- ê°™ì€ ë²„íŠ¼ ì¬í´ë¦­ ì‹œ ë°˜ì‘ ì·¨ì†Œ
- ë°˜ëŒ€ ë²„íŠ¼ í´ë¦­ ì‹œ ê¸°ì¡´ ë°˜ì‘ ì·¨ì†Œ í›„ ìƒˆ ë°˜ì‘ìœ¼ë¡œ ì „í™˜
- í™œì„±í™”ëœ ë²„íŠ¼ ì‹œê°ì  í‘œì‹œ (íŒŒë€ìƒ‰/ë¹¨ê°„ìƒ‰ ë°°ê²½)

#### ìˆ˜ì •ëœ íŒŒì¼
```
backend/src/main/java/com/ej2/service/PostService.java
  - incrementLikeCount() ë©”ì„œë“œ ìˆ˜ì • (í† ê¸€ + ìƒí˜¸ë°°íƒ€ ë¡œì§)
  - incrementDislikeCount() ë©”ì„œë“œ ìˆ˜ì • (í† ê¸€ + ìƒí˜¸ë°°íƒ€ ë¡œì§)
  - getUserReaction() ë©”ì„œë“œ ì¶”ê°€ (í˜„ì¬ ë°˜ì‘ ìƒíƒœ ì¡°íšŒ)

backend/src/main/java/com/ej2/controller/PostController.java
  - HashMap, Map import ì¶”ê°€
  - incrementLikeCount/incrementDislikeCount ì‘ë‹µì— reaction ìƒíƒœ í¬í•¨
  - GET /api/posts/{id}/reaction/status ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

frontend/src/pages/Board/PostDetailPage.js
  - userReaction state ì¶”ê°€
  - fetchPost()ì—ì„œ reaction status API í˜¸ì¶œ
  - handleLikePost/handleDislikePost ìˆ˜ì • (reaction state ì—…ë°ì´íŠ¸)
  - ë²„íŠ¼ ë Œë”ë§ì— active í´ë˜ìŠ¤ ë™ì  ì ìš©

frontend/src/pages/Board/PostDetailPage.css
  - .like-button.active ìŠ¤íƒ€ì¼ ì¶”ê°€
  - .dislike-button.active ìŠ¤íƒ€ì¼ ì¶”ê°€
```

#### ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

**PostService.java - incrementLikeCount() ë¡œì§:**
```java
public void incrementLikeCount(Long postId, Long userId, String ipAddress) {
    Post post = postRepository.findById(postId)
            .orElseThrow(() -> new RuntimeException("Post not found with id: " + postId));

    if (userId != null) {
        // 1. ê¸°ì¡´ ì¢‹ì•„ìš” í™•ì¸ (í† ê¸€)
        List<PostLikeLog> userLikeLogs = postLikeLogRepository
                .findByPostIdAndUserId(postId, userId);

        if (!userLikeLogs.isEmpty()) {
            // ì´ë¯¸ ì¢‹ì•„ìš” â†’ ì·¨ì†Œ
            for (PostLikeLog likeLog : userLikeLogs) {
                postLikeLogRepository.delete(likeLog);
            }
            post.setLikeCount(Math.max(0, post.getLikeCount() - 1));
            postRepository.save(post);
            return;
        }

        // 2. ê¸°ì¡´ ì‹«ì–´ìš” í™•ì¸ (ìƒí˜¸ë°°íƒ€)
        List<PostDislikeLog> userDislikeLogs = postDislikeLogRepository
                .findByPostIdAndUserId(postId, userId);
        if (!userDislikeLogs.isEmpty()) {
            // ì‹«ì–´ìš” ì·¨ì†Œ
            for (PostDislikeLog dislikeLog : userDislikeLogs) {
                postDislikeLogRepository.delete(dislikeLog);
            }
            post.setDislikeCount(Math.max(0, post.getDislikeCount() - 1));
        }

        // 3. ì¢‹ì•„ìš” ì¶”ê°€
        post.setLikeCount(post.getLikeCount() + 1);
        postRepository.save(post);
        PostLikeLog likeLog = new PostLikeLog(postId, userId, ipAddress);
        postLikeLogRepository.save(likeLog);
    }
    // ... IP ê¸°ë°˜ ì‚¬ìš©ìë„ ë™ì¼í•œ ë¡œì§
}
```

**PostService.java - getUserReaction() ë©”ì„œë“œ:**
```java
public String getUserReaction(Long postId, Long userId, String ipAddress) {
    if (userId != null) {
        if (!postLikeLogRepository.findByPostIdAndUserId(postId, userId).isEmpty()) {
            return "like";
        }
        if (!postDislikeLogRepository.findByPostIdAndUserId(postId, userId).isEmpty()) {
            return "dislike";
        }
    } else if (ipAddress != null) {
        if (!postLikeLogRepository.findByPostIdAndIpAddress(postId, ipAddress).isEmpty()) {
            return "like";
        }
        if (!postDislikeLogRepository.findByPostIdAndIpAddress(postId, ipAddress).isEmpty()) {
            return "dislike";
        }
    }
    return "none";
}
```

**PostController.java - API ì‘ë‹µ ìˆ˜ì •:**
```java
@PostMapping("/{id}/like")
public ResponseEntity<Map<String, Object>> incrementLikeCount(
        @PathVariable Long id,
        @RequestParam(required = false) Long userId,
        HttpServletRequest request) {
    String ipAddress = getClientIpAddress(request);
    postService.incrementLikeCount(id, userId, ipAddress);
    String reaction = postService.getUserReaction(id, userId, ipAddress);

    Map<String, Object> response = new HashMap<String, Object>();
    response.put("reaction", reaction);  // "like", "dislike", "none"
    return ResponseEntity.ok(response);
}

@GetMapping("/{id}/reaction/status")
public ResponseEntity<Map<String, String>> getReactionStatus(
        @PathVariable Long id,
        @RequestParam(required = false) Long userId,
        HttpServletRequest request) {
    String ipAddress = getClientIpAddress(request);
    String reaction = postService.getUserReaction(id, userId, ipAddress);

    Map<String, String> response = new HashMap<String, String>();
    response.put("reaction", reaction);
    return ResponseEntity.ok(response);
}
```

**PostDetailPage.js - í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„:**
```javascript
// State ì¶”ê°€
const [userReaction, setUserReaction] = useState('none'); // 'like', 'dislike', 'none'

// ì´ˆê¸° ë¡œë“œ ì‹œ reaction status ê°€ì ¸ì˜¤ê¸°
const fetchPost = async () => {
  try {
    const response = await axios.get(`/api/posts/${postId}`);
    setPost(response.data);

    // ì‚¬ìš©ìì˜ í˜„ì¬ ë°˜ì‘ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
    const user = JSON.parse(localStorage.getItem('user') || '{}');
    const userId = user.id || null;
    const params = userId ? { userId } : {};
    try {
      const reactionResponse = await axios.get(`/api/posts/${postId}/reaction/status`, { params });
      setUserReaction(reactionResponse.data.reaction);
    } catch (reactionError) {
      console.error('åå¿œçŠ¶æ…‹ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', reactionError);
      setUserReaction('none');
    }

    setLoading(false);
  } catch (error) {
    console.error('æŠ•ç¨¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
  }
};

// ì¢‹ì•„ìš” í•¸ë“¤ëŸ¬ ìˆ˜ì •
const handleLikePost = async () => {
  try {
    const user = JSON.parse(localStorage.getItem('user') || '{}');
    const userId = user.id || null;
    const params = userId ? { userId } : {};
    const response = await axios.post(`/api/posts/${postId}/like`, null, { params });
    setUserReaction(response.data.reaction); // 'like' ë˜ëŠ” 'none'
    fetchPost(); // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
  } catch (error) {
    console.error('ã„ã„ã­ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
  }
};

// ë²„íŠ¼ ë Œë”ë§ (active í´ë˜ìŠ¤ ë™ì  ì ìš©)
<button
  className={`action-button like-button ${userReaction === 'like' ? 'active' : ''}`}
  onClick={handleLikePost}
>
  ğŸ‘ ã„ã„ã­ ({post.likeCount})
</button>
<button
  className={`action-button dislike-button ${userReaction === 'dislike' ? 'active' : ''}`}
  onClick={handleDislikePost}
>
  ğŸ‘ ã‚ˆããªã„ ({post.dislikeCount || 0})
</button>
```

**PostDetailPage.css - Active ìƒíƒœ ìŠ¤íƒ€ì¼:**
```css
/* Active state for like button */
.like-button.active {
  border-color: #5c6bc0;
  background: #e8eaf6;
  color: #5c6bc0;
  font-weight: 700;
}

/* Active state for dislike button */
.dislike-button.active {
  border-color: #ef5350;
  background: #ffebee;
  color: #ef5350;
  font-weight: 700;
}
```

#### ë™ì‘ ì‹œë‚˜ë¦¬ì˜¤

**ì‹œë‚˜ë¦¬ì˜¤ 1: í† ê¸€ (ê°™ì€ ë²„íŠ¼ ë‘ ë²ˆ í´ë¦­)**
```
1. ì‚¬ìš©ìê°€ ì¢‹ì•„ìš” í´ë¦­
   â†’ likeCount += 1
   â†’ PostLikeLogì— ê¸°ë¡ ì €ì¥
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ í™œì„±í™” (íŒŒë€ìƒ‰)

2. ì‚¬ìš©ìê°€ ì¢‹ì•„ìš” ë‹¤ì‹œ í´ë¦­ (í† ê¸€)
   â†’ likeCount -= 1
   â†’ PostLikeLogì—ì„œ ê¸°ë¡ ì‚­ì œ
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ ë¹„í™œì„±í™” (ì›ë˜ ìƒ‰)
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ìƒí˜¸ë°°íƒ€ (ì¢‹ì•„ìš” â†’ ì‹«ì–´ìš” ì „í™˜)**
```
1. ì‚¬ìš©ìê°€ ì¢‹ì•„ìš” í´ë¦­
   â†’ likeCount = 1, dislikeCount = 0
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ í™œì„±í™”

2. ì‚¬ìš©ìê°€ ì‹«ì–´ìš” í´ë¦­
   â†’ PostLikeLogì—ì„œ ì¢‹ì•„ìš” ê¸°ë¡ ì‚­ì œ
   â†’ likeCount -= 1 (1 â†’ 0)
   â†’ PostDislikeLogì— ì‹«ì–´ìš” ê¸°ë¡ ì¶”ê°€
   â†’ dislikeCount += 1 (0 â†’ 1)
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ ë¹„í™œì„±í™”, ì‹«ì–´ìš” ë²„íŠ¼ í™œì„±í™”

ìµœì¢… ìƒíƒœ: likeCount = 0, dislikeCount = 1
```

**ì‹œë‚˜ë¦¬ì˜¤ 3: í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í›„ ìƒíƒœ ìœ ì§€**
```
1. ì‚¬ìš©ìê°€ ì¢‹ì•„ìš” í´ë¦­ í›„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
2. fetchPost()ì—ì„œ GET /api/posts/{id}/reaction/status í˜¸ì¶œ
3. ì„œë²„ê°€ PostLikeLog ì¡°íšŒ â†’ "like" ë°˜í™˜
4. setUserReaction('like') â†’ ì¢‹ì•„ìš” ë²„íŠ¼ í™œì„±í™” ìƒíƒœë¡œ í‘œì‹œ
```

---

### 2. ëŒ“ê¸€ ì‚­ì œ - ì¡°ê±´ë¶€ ì‚­ì œ ì „ëµ + ìë™ ì •ë¦¬

#### ë³€ê²½ ê°œìš”
- ë‹µê¸€ ìœ ë¬´ì— ë”°ë¼ í•˜ë“œ ì‚­ì œ/ì†Œí”„íŠ¸ ì‚­ì œ ìë™ ë¶„ê¸°
- ì†Œí”„íŠ¸ ì‚­ì œëœ ë¶€ëª¨ ëŒ“ê¸€ì˜ ìë™ ì •ë¦¬ ë¡œì§ ì¶”ê°€

#### ë³€ê²½ ì „ (ë¬´ì¡°ê±´ í•˜ë“œ ì‚­ì œ)
- ëª¨ë“  ëŒ“ê¸€ì„ DBì—ì„œ ì™„ì „íˆ ì‚­ì œ
- ë‹µê¸€(ìì‹ ëŒ“ê¸€)ì˜ `parentId`ë¥¼ `null`ë¡œ ì„¤ì • (ê³ ì•„í™”)
- ë‹µê¸€ì´ ìµœìƒìœ„ ëŒ“ê¸€ë¡œ ìŠ¹ê²©ë¨
- ëŒ“ê¸€ ë§¥ë½ ì†ì‹¤

#### ë³€ê²½ í›„ (ì¡°ê±´ë¶€ ì‚­ì œ)
- **ë‹µê¸€ì´ ì—†ìœ¼ë©´**: í•˜ë“œ ì‚­ì œ (DBì—ì„œ ì™„ì „íˆ ì œê±°)
- **ë‹µê¸€ì´ ìˆìœ¼ë©´**: ì†Œí”„íŠ¸ ì‚­ì œ ("å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚" í‘œì‹œ)
- **ìë™ ì •ë¦¬**: ì†Œí”„íŠ¸ ì‚­ì œëœ ë¶€ëª¨ì˜ ëª¨ë“  ë‹µê¸€ì´ ì‚­ì œë˜ë©´ ë¶€ëª¨ë„ ìë™ìœ¼ë¡œ í•˜ë“œ ì‚­ì œ

#### ìˆ˜ì •ëœ íŒŒì¼
```
backend/src/main/java/com/ej2/service/CommentService.java
  - deleteComment() ë©”ì„œë“œ ì™„ì „ ì¬ì‘ì„±
  - ë‹µê¸€ ìœ ë¬´ í™•ì¸ ë¡œì§ ì¶”ê°€
  - ì¡°ê±´ë¶€ ë¶„ê¸° (hasChildren)
  - ë¶€ëª¨ ìë™ ì •ë¦¬ ë¡œì§ ì¶”ê°€
```

#### ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

**CommentService.java - deleteComment() ì™„ì „ ì¬ì‘ì„±:**
```java
// ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ï¼ˆå­ã‚³ãƒ¡ãƒ³ãƒˆã®æœ‰ç„¡ã«å¿œã˜ã¦å‡¦ç†åˆ†å² + è¦ªã®è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰
public void deleteComment(Long id) {
    Comment comment = commentRepository.findById(id)
            .orElseThrow(() -> new RuntimeException("Comment not found with id: " + id));

    Long parentId = comment.getParentId(); // ë¶€ëª¨ ID ë¯¸ë¦¬ ì €ì¥

    // å­ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆë‹µê¸€ï¼‰ã®æœ‰ç„¡ã‚’ç¢ºèª
    List<Comment> childComments = commentRepository.findByParentIdOrderByCreatedAtAsc(id);
    boolean hasChildren = !childComments.isEmpty();

    if (hasChildren) {
        // ë‹µê¸€ì´ ìˆìœ¼ë©´ ì†Œí”„íŠ¸ ì‚­ì œ
        comment.setIsDeleted(true);
        comment.setContent("å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚");
        commentRepository.save(comment);

        // ê²Œì‹œê¸€ ëŒ“ê¸€ ìˆ˜ ê°ì†Œ
        Optional<Post> postOpt = postRepository.findById(comment.getPostId());
        if (postOpt.isPresent()) {
            Post post = postOpt.get();
            post.setCommentCount(Math.max(0, post.getCommentCount() - 1));
            postRepository.save(post);
        }
    } else {
        // ë‹µê¸€ì´ ì—†ìœ¼ë©´ í•˜ë“œ ì‚­ì œ

        // ê²Œì‹œê¸€ ëŒ“ê¸€ ìˆ˜ ê°ì†Œ
        Optional<Post> postOpt = postRepository.findById(comment.getPostId());
        if (postOpt.isPresent()) {
            Post post = postOpt.get();
            post.setCommentCount(Math.max(0, post.getCommentCount() - 1));
            postRepository.save(post);
        }

        // ê´€ë ¨ ì¢‹ì•„ìš” ë¡œê·¸ ì‚­ì œ
        commentLikeLogRepository.deleteByCommentId(id);

        // ëŒ“ê¸€ í•˜ë“œ ì‚­ì œ
        commentRepository.delete(comment);
    }

    // âœ¨ ìë™ ì •ë¦¬: ë¶€ëª¨ê°€ ì†Œí”„íŠ¸ ì‚­ì œ ìƒíƒœì´ê³  ë‚¨ì€ ìì‹ì´ ì—†ìœ¼ë©´ ë¶€ëª¨ë„ í•˜ë“œ ì‚­ì œ
    if (parentId != null) {
        Optional<Comment> parentOpt = commentRepository.findById(parentId);
        if (parentOpt.isPresent()) {
            Comment parent = parentOpt.get();
            if (Boolean.TRUE.equals(parent.getIsDeleted())) {
                // ë¶€ëª¨ì˜ ë‚¨ì€ ìì‹ í™•ì¸
                List<Comment> remainingChildren = commentRepository.findByParentIdOrderByCreatedAtAsc(parentId);
                if (remainingChildren.isEmpty()) {
                    // ë‚¨ì€ ìì‹ì´ ì—†ìœ¼ë©´ ë¶€ëª¨ë„ í•˜ë“œ ì‚­ì œ

                    // ë¶€ëª¨ì˜ ê²Œì‹œê¸€ ëŒ“ê¸€ ìˆ˜ëŠ” ì´ë¯¸ ì†Œí”„íŠ¸ ì‚­ì œ ì‹œ ê°ì†Œë˜ì—ˆìœ¼ë¯€ë¡œ ì¶”ê°€ ê°ì†Œ ë¶ˆí•„ìš”

                    // ë¶€ëª¨ì˜ ì¢‹ì•„ìš” ë¡œê·¸ ì‚­ì œ
                    commentLikeLogRepository.deleteByCommentId(parentId);

                    // ë¶€ëª¨ í•˜ë“œ ì‚­ì œ
                    commentRepository.delete(parent);
                }
            }
        }
    }
}
```

#### ì‚­ì œ í”„ë¡œì„¸ìŠ¤ ìˆœì„œë„

**ë‹µê¸€ì´ ì—†ëŠ” ëŒ“ê¸€ ì‚­ì œ:**
```
1. ì‚­ì œí•  ëŒ“ê¸€ ì¡°íšŒ
   â†“
2. ìì‹ ëŒ“ê¸€ í™•ì¸ (findByParentIdOrderByCreatedAtAsc)
   â†’ ìì‹ ì—†ìŒ (isEmpty() = true)
   â†“
3. ê²Œì‹œê¸€ì˜ commentCount ê°ì†Œ
   â†“
4. ëŒ“ê¸€ì˜ ì¢‹ì•„ìš” ë¡œê·¸ ì‚­ì œ (commentLikeLogRepository.deleteByCommentId)
   â†“
5. ëŒ“ê¸€ì„ DBì—ì„œ ì™„ì „íˆ ì‚­ì œ (commentRepository.delete)
   â†“
6. ë¶€ëª¨ ëŒ“ê¸€ ìë™ ì •ë¦¬ ë¡œì§ ì‹¤í–‰ (í•´ë‹¹ë˜ëŠ” ê²½ìš°)
```

**ë‹µê¸€ì´ ìˆëŠ” ëŒ“ê¸€ ì‚­ì œ:**
```
1. ì‚­ì œí•  ëŒ“ê¸€ ì¡°íšŒ
   â†“
2. ìì‹ ëŒ“ê¸€ í™•ì¸
   â†’ ìì‹ ìˆìŒ (isEmpty() = false)
   â†“
3. ì†Œí”„íŠ¸ ì‚­ì œ ì²˜ë¦¬
   - isDeleted = true
   - content = "å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚"
   â†“
4. ê²Œì‹œê¸€ì˜ commentCount ê°ì†Œ
   â†“
5. ëŒ“ê¸€ ì €ì¥ (DBì— ìœ ì§€, ì†Œí”„íŠ¸ ì‚­ì œ ìƒíƒœë¡œ)
   â†“
6. ë¶€ëª¨ ëŒ“ê¸€ ìë™ ì •ë¦¬ ë¡œì§ ì‹¤í–‰ (í•´ë‹¹ë˜ëŠ” ê²½ìš°)
```

#### ìë™ ì •ë¦¬ ë¡œì§ ì˜ˆì‹œ

**ì‹œë‚˜ë¦¬ì˜¤: ì†Œí”„íŠ¸ ì‚­ì œëœ ë¶€ëª¨ + ë‹µê¸€ ì‚­ì œ**
```
ì´ˆê¸° ìƒíƒœ:
[ëŒ“ê¸€ A: "å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚"] - isDeleted: true
  â”œâ”€ [ë‹µê¸€ B: "ë™ì˜í•©ë‹ˆë‹¤"]
  â””â”€ [ë‹µê¸€ C: "ì €ë„ìš”"]

1. ë‹µê¸€ B ì‚­ì œ:
   - BëŠ” ìì‹ì´ ì—†ìœ¼ë¯€ë¡œ í•˜ë“œ ì‚­ì œ
   - ë¶€ëª¨ A í™•ì¸ â†’ A.isDeleted = true
   - Aì˜ ë‚¨ì€ ìì‹ í™•ì¸ â†’ [ë‹µê¸€ C] 1ê°œ ë‚¨ìŒ
   - A ìœ ì§€ (ì•„ì§ ìì‹ì´ ìˆìŒ)

2. ë‹µê¸€ C ì‚­ì œ:
   - CëŠ” ìì‹ì´ ì—†ìœ¼ë¯€ë¡œ í•˜ë“œ ì‚­ì œ
   - ë¶€ëª¨ A í™•ì¸ â†’ A.isDeleted = true
   - Aì˜ ë‚¨ì€ ìì‹ í™•ì¸ â†’ 0ê°œ (ëª¨ë‘ ì‚­ì œë¨)
   - âœ¨ Aë„ ìë™ìœ¼ë¡œ í•˜ë“œ ì‚­ì œë¨!

ìµœì¢… ìƒíƒœ: ëª¨ë“  ëŒ“ê¸€ì´ DBì—ì„œ ì™„ì „íˆ ì œê±°ë¨
```

#### ëŒ€ëŒ“ê¸€ ì²˜ë¦¬ ë¹„êµ

**ë³€ê²½ ì „ (ë¬´ì¡°ê±´ í•˜ë“œ ì‚­ì œ + ê³ ì•„í™”):**
```
ì´ˆê¸°:
[ëŒ“ê¸€ A]
  â”œâ”€ [ë‹µê¸€ B]
  â””â”€ [ë‹µê¸€ C]

ëŒ“ê¸€ A ì‚­ì œ í›„:
[ë‹µê¸€ B] - parentId: null (ê³ ì•„í™”, ìµœìƒìœ„ë¡œ ìŠ¹ê²©)
[ë‹µê¸€ C] - parentId: null (ê³ ì•„í™”, ìµœìƒìœ„ë¡œ ìŠ¹ê²©)

ë¬¸ì œì : ëŒ€í™” ë§¥ë½ ì†ì‹¤
```

**ë³€ê²½ í›„ (ì¡°ê±´ë¶€ ì‚­ì œ):**
```
ì´ˆê¸°:
[ëŒ“ê¸€ A]
  â”œâ”€ [ë‹µê¸€ B]
  â””â”€ [ë‹µê¸€ C]

ëŒ“ê¸€ A ì‚­ì œ í›„:
[ëŒ“ê¸€ A: "å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚"] - isDeleted: true
  â”œâ”€ [ë‹µê¸€ B] - parentId: A.id (ìœ ì§€)
  â””â”€ [ë‹µê¸€ C] - parentId: A.id (ìœ ì§€)

ì¥ì : ëŒ€í™” ë§¥ë½ ìœ ì§€, ë‹µê¸€ êµ¬ì¡° ë³´ì¡´

ë‹µê¸€ B, Cë¥¼ ëª¨ë‘ ì‚­ì œí•˜ë©´:
â†’ Aë„ ìë™ìœ¼ë¡œ í•˜ë“œ ì‚­ì œ (ìë™ ì •ë¦¬)
```

---

## í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### 1. ì¢‹ì•„ìš”/ì‹«ì–´ìš” í† ê¸€ & ìƒí˜¸ë°°íƒ€ í…ŒìŠ¤íŠ¸

**ì¤€ë¹„:**
1. ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹¤í–‰
2. í…ŒìŠ¤íŠ¸ìš© ê²Œì‹œê¸€ ìƒì„±

**í…ŒìŠ¤íŠ¸ ì ˆì°¨:**

**í† ê¸€ í…ŒìŠ¤íŠ¸:**
```
1. ë¡œê·¸ì¸ í›„ ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ ì ‘ì†
2. ì¢‹ì•„ìš” ë²„íŠ¼ í´ë¦­
   â†’ ì¢‹ì•„ìš” ìˆ˜ 1 ì¦ê°€
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ íŒŒë€ìƒ‰ ë°°ê²½ í™œì„±í™” âœ…
3. ì¢‹ì•„ìš” ë²„íŠ¼ ë‹¤ì‹œ í´ë¦­
   â†’ ì¢‹ì•„ìš” ìˆ˜ 1 ê°ì†Œ (0ìœ¼ë¡œ)
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ ì›ë˜ ìƒ‰ìœ¼ë¡œ ë¹„í™œì„±í™” âœ…
4. ì¢‹ì•„ìš” ë²„íŠ¼ ì„¸ ë²ˆì§¸ í´ë¦­
   â†’ ì¢‹ì•„ìš” ìˆ˜ ë‹¤ì‹œ 1 ì¦ê°€
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™” âœ…
```

**ìƒí˜¸ë°°íƒ€ í…ŒìŠ¤íŠ¸:**
```
1. ì¢‹ì•„ìš” ë²„íŠ¼ í´ë¦­
   â†’ likeCount = 1, dislikeCount = 0
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ í™œì„±í™” âœ…

2. ì‹«ì–´ìš” ë²„íŠ¼ í´ë¦­
   â†’ likeCount = 0, dislikeCount = 1
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ ë¹„í™œì„±í™”, ì‹«ì–´ìš” ë²„íŠ¼ í™œì„±í™” âœ…

3. ì¢‹ì•„ìš” ë²„íŠ¼ í´ë¦­
   â†’ likeCount = 1, dislikeCount = 0
   â†’ ì¢‹ì•„ìš” ë²„íŠ¼ í™œì„±í™”, ì‹«ì–´ìš” ë²„íŠ¼ ë¹„í™œì„±í™” âœ…
```

**í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í›„ ìƒíƒœ ìœ ì§€ í…ŒìŠ¤íŠ¸:**
```
1. ì¢‹ì•„ìš” í´ë¦­ â†’ ì¢‹ì•„ìš” ë²„íŠ¼ í™œì„±í™”
2. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (F5)
3. í™•ì¸: ì¢‹ì•„ìš” ë²„íŠ¼ì´ ì—¬ì „íˆ í™œì„±í™” ìƒíƒœë¡œ í‘œì‹œ âœ…
```

**ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦:**
```sql
-- ì‚¬ìš©ì 1ì´ ê²Œì‹œê¸€ 1ì— ì¢‹ì•„ìš” í›„ ì‹«ì–´ìš”ë¡œ ì „í™˜í–ˆì„ ë•Œ
SELECT * FROM post_like_logs WHERE post_id = 1 AND user_id = 1;
-- ê²°ê³¼: 0 rows (ì¢‹ì•„ìš” ë¡œê·¸ ì‚­ì œë¨) âœ…

SELECT * FROM post_dislike_logs WHERE post_id = 1 AND user_id = 1;
-- ê²°ê³¼: 1 row (ì‹«ì–´ìš” ë¡œê·¸ë§Œ ì¡´ì¬) âœ…

SELECT like_count, dislike_count FROM posts WHERE id = 1;
-- ê²°ê³¼: like_count = 0, dislike_count = 1 âœ…
```

---

### 2. ì¡°ê±´ë¶€ ëŒ“ê¸€ ì‚­ì œ í…ŒìŠ¤íŠ¸

**ì‹œë‚˜ë¦¬ì˜¤ 1: ë‹µê¸€ ì—†ëŠ” ëŒ“ê¸€ ì‚­ì œ (í•˜ë“œ ì‚­ì œ)**
```
1. ì‚¬ìš©ì Aë¡œ ë¡œê·¸ì¸í•˜ì—¬ ëŒ“ê¸€ A ì‘ì„±
2. ëŒ“ê¸€ Aì— ì¢‹ì•„ìš” í´ë¦­
3. ëŒ“ê¸€ A ì‚­ì œ í´ë¦­
```

**ì˜ˆìƒ ê²°ê³¼:**
- âœ… ëŒ“ê¸€ Aê°€ í™”ë©´ì—ì„œ ì™„ì „íˆ ì‚¬ë¼ì§
- âœ… ê²Œì‹œê¸€ì˜ commentCountê°€ 1 ê°ì†Œ
- âœ… DBì—ì„œ ëŒ“ê¸€ A ì™„ì „íˆ ì‚­ì œë¨
- âœ… ëŒ“ê¸€ Aì˜ ì¢‹ì•„ìš” ë¡œê·¸ë„ í•¨ê»˜ ì‚­ì œë¨

**ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦:**
```sql
SELECT * FROM comments WHERE id = <ëŒ“ê¸€A_id>;
-- ê²°ê³¼: 0 rows (ì™„ì „íˆ ì‚­ì œë¨) âœ…

SELECT * FROM comment_like_logs WHERE comment_id = <ëŒ“ê¸€A_id>;
-- ê²°ê³¼: 0 rows (ì¢‹ì•„ìš” ë¡œê·¸ë„ ì‚­ì œë¨) âœ…
```

---

**ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹µê¸€ ìˆëŠ” ëŒ“ê¸€ ì‚­ì œ (ì†Œí”„íŠ¸ ì‚­ì œ)**
```
1. ì‚¬ìš©ì Aë¡œ ë¡œê·¸ì¸í•˜ì—¬ ëŒ“ê¸€ A ì‘ì„±
2. ì‚¬ìš©ì Bë¡œ ë¡œê·¸ì¸í•˜ì—¬ ëŒ“ê¸€ Aì— ëŒ€í•œ ë‹µê¸€ B ì‘ì„±
3. ì‚¬ìš©ì Aë¡œ ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì—¬ ëŒ“ê¸€ A ì‚­ì œ í´ë¦­
```

**ì˜ˆìƒ ê²°ê³¼:**
- âœ… ëŒ“ê¸€ Aì˜ ë‚´ìš©ì´ "å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚"ë¡œ ë³€ê²½
- âœ… ëŒ“ê¸€ AëŠ” ì—¬ì „íˆ í™”ë©´ì— í‘œì‹œë¨ (íšŒìƒ‰ ìŠ¤íƒ€ì¼)
- âœ… ë‹µê¸€ BëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ (parentId = A.id)
- âœ… ê²Œì‹œê¸€ì˜ commentCountê°€ 1 ê°ì†Œ

**ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦:**
```sql
SELECT id, content, is_deleted, parent_id FROM comments WHERE id = <ëŒ“ê¸€A_id>;
-- ê²°ê³¼:
-- id = <ëŒ“ê¸€A_id>
-- content = "å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚"
-- is_deleted = true
-- parent_id = NULL (ë˜ëŠ” ì›ë˜ ê°’) âœ…

SELECT id, parent_id FROM comments WHERE id = <ë‹µê¸€B_id>;
-- ê²°ê³¼:
-- id = <ë‹µê¸€B_id>
-- parent_id = <ëŒ“ê¸€A_id> (ì—¬ì „íˆ ë¶€ëª¨ ì°¸ì¡° ìœ ì§€) âœ…
```

---

**ì‹œë‚˜ë¦¬ì˜¤ 3: ìë™ ì •ë¦¬ (ì†Œí”„íŠ¸ ì‚­ì œëœ ë¶€ëª¨ + ë‹µê¸€ ëª¨ë‘ ì‚­ì œ)**
```
ì´ˆê¸° êµ¬ì¡°:
[ëŒ“ê¸€ A]
  â”œâ”€ [ë‹µê¸€ B]
  â””â”€ [ë‹µê¸€ C]

1. ëŒ“ê¸€ A ì‚­ì œ
   â†’ ì†Œí”„íŠ¸ ì‚­ì œ (ë‹µê¸€ B, Cê°€ ìˆìœ¼ë¯€ë¡œ)

2. ë‹µê¸€ C ì‚­ì œ
   â†’ í•˜ë“œ ì‚­ì œ (ìì‹ì´ ì—†ìœ¼ë¯€ë¡œ)
   â†’ ë¶€ëª¨ A í™•ì¸: A.isDeleted = true
   â†’ Aì˜ ë‚¨ì€ ìì‹ í™•ì¸: [ë‹µê¸€ B] 1ê°œ ë‚¨ìŒ
   â†’ A ìœ ì§€

3. ë‹µê¸€ B ì‚­ì œ
   â†’ í•˜ë“œ ì‚­ì œ (ìì‹ì´ ì—†ìœ¼ë¯€ë¡œ)
   â†’ ë¶€ëª¨ A í™•ì¸: A.isDeleted = true
   â†’ Aì˜ ë‚¨ì€ ìì‹ í™•ì¸: 0ê°œ
   â†’ âœ¨ Aë„ ìë™ìœ¼ë¡œ í•˜ë“œ ì‚­ì œë¨!
```

**ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦:**
```sql
-- ëª¨ë“  ë‹¨ê³„ ì™„ë£Œ í›„
SELECT * FROM comments WHERE id IN (<ëŒ“ê¸€A_id>, <ë‹µê¸€B_id>, <ë‹µê¸€C_id>);
-- ê²°ê³¼: 0 rows (ëª¨ë“  ëŒ“ê¸€ì´ DBì—ì„œ ì™„ì „íˆ ì œê±°ë¨) âœ…
```

---

### 3. ì—£ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸

**ì¼€ì´ìŠ¤ 1: ì—¬ëŸ¬ ì‚¬ìš©ìì˜ ë™ì‹œ ì¢‹ì•„ìš” í´ë¦­**
```
1. ì‚¬ìš©ì Aê°€ ì¢‹ì•„ìš” í´ë¦­ â†’ likeCount = 1
2. ì‚¬ìš©ì Bê°€ ì¢‹ì•„ìš” í´ë¦­ â†’ likeCount = 2
3. ì‚¬ìš©ì Aê°€ ì¢‹ì•„ìš” ë‹¤ì‹œ í´ë¦­ (í† ê¸€) â†’ likeCount = 1
4. ì‚¬ìš©ì Bê°€ ì‹«ì–´ìš” í´ë¦­ (ì „í™˜) â†’ likeCount = 1, dislikeCount = 1

ì˜ˆìƒ ê²°ê³¼:
- likeCount = 1 (ì‚¬ìš©ì Aë§Œ ì¢‹ì•„ìš” ìœ ì§€)
- dislikeCount = 1 (ì‚¬ìš©ì BëŠ” ì‹«ì–´ìš”ë¡œ ì „í™˜)
```

**ì¼€ì´ìŠ¤ 2: 3ë‹¨ê³„ ì¤‘ì²© ëŒ“ê¸€ ì‚­ì œ**
```
êµ¬ì¡°:
[ëŒ“ê¸€ A]
  â””â”€ [ë‹µê¸€ B]
      â””â”€ [ë‹µê¸€ C]

1. ëŒ“ê¸€ A ì‚­ì œ â†’ ì†Œí”„íŠ¸ ì‚­ì œ (ë‹µê¸€ B ìˆìŒ)
2. ë‹µê¸€ C ì‚­ì œ â†’ í•˜ë“œ ì‚­ì œ (ìì‹ ì—†ìŒ)
   - ë¶€ëª¨ B í™•ì¸ â†’ BëŠ” ì‚­ì œë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ê·¸ëŒ€ë¡œ
3. ë‹µê¸€ B ì‚­ì œ â†’ í•˜ë“œ ì‚­ì œ (ë‹µê¸€ Cê°€ ì´ë¯¸ ì‚­ì œë˜ì–´ ìì‹ ì—†ìŒ)
   - ë¶€ëª¨ A í™•ì¸ â†’ A.isDeleted = true
   - Aì˜ ë‚¨ì€ ìì‹ í™•ì¸ â†’ 0ê°œ
   - Aë„ ìë™ í•˜ë“œ ì‚­ì œ âœ…
```

---

## ì„±ëŠ¥ ì˜í–¥ ë¶„ì„

### 1. ì¢‹ì•„ìš”/ì‹«ì–´ìš” ì¡°íšŒ ì¿¼ë¦¬

**ë³€ê²½ ì „ (ì˜êµ¬ 1íšŒ ì œí•œ):**
```sql
SELECT * FROM post_like_logs
WHERE post_id = ?
  AND user_id = ?;
```

**ë³€ê²½ í›„ (í† ê¸€ + ìƒí˜¸ë°°íƒ€):**
```sql
-- 1. ì¢‹ì•„ìš” í™•ì¸ (í† ê¸€ ì²´í¬)
SELECT * FROM post_like_logs
WHERE post_id = ? AND user_id = ?;

-- 2. ì‹«ì–´ìš” í™•ì¸ (ìƒí˜¸ë°°íƒ€ ì²´í¬)
SELECT * FROM post_dislike_logs
WHERE post_id = ? AND user_id = ?;
```

**ì„±ëŠ¥ ì˜í–¥:**
- âš ï¸ ì¿¼ë¦¬ ê°œìˆ˜ 2ë°° ì¦ê°€ (1ê°œ â†’ 2ê°œ)
- âœ… ë³µí•© ì¸ë±ìŠ¤ë¡œ ì¿¼ë¦¬ ì†ë„ ìµœì í™” ê°€ëŠ¥
- âœ… ê° ì¿¼ë¦¬ëŠ” ì—¬ì „íˆ ë§¤ìš° ë¹ ë¦„ (indexed lookup)

**ê¶Œì¥ ì¸ë±ìŠ¤:**
```sql
CREATE INDEX idx_post_like_user ON post_like_logs(post_id, user_id);
CREATE INDEX idx_post_dislike_user ON post_dislike_logs(post_id, user_id);
CREATE INDEX idx_post_like_ip ON post_like_logs(post_id, ip_address);
CREATE INDEX idx_post_dislike_ip ON post_dislike_logs(post_id, ip_address);
```

---

### 2. ëŒ“ê¸€ ì‚­ì œ í”„ë¡œì„¸ìŠ¤

**ë³€ê²½ ì „ (ë¬´ì¡°ê±´ í•˜ë“œ ì‚­ì œ):**
```sql
-- 1. ìì‹ ëŒ“ê¸€ ê³ ì•„í™”
UPDATE comments SET parent_id = NULL WHERE parent_id = ?;

-- 2. ì¢‹ì•„ìš” ë¡œê·¸ ì‚­ì œ
DELETE FROM comment_like_logs WHERE comment_id = ?;

-- 3. ëŒ“ê¸€ ì‚­ì œ
DELETE FROM comments WHERE id = ?;
```

**ë³€ê²½ í›„ (ì¡°ê±´ë¶€ ì‚­ì œ):**
```sql
-- Case 1: ìì‹ì´ ì—†ìœ¼ë©´ (í•˜ë“œ ì‚­ì œ)
DELETE FROM comment_like_logs WHERE comment_id = ?;
DELETE FROM comments WHERE id = ?;

-- Case 2: ìì‹ì´ ìˆìœ¼ë©´ (ì†Œí”„íŠ¸ ì‚­ì œ)
UPDATE comments
SET is_deleted = true, content = 'å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆã§ã™ã€‚'
WHERE id = ?;

-- ì¶”ê°€: ë¶€ëª¨ ìë™ ì •ë¦¬ (ì¡°ê±´ë¶€)
SELECT * FROM comments WHERE parent_id = ?;  -- ë‚¨ì€ ìì‹ í™•ì¸
DELETE FROM comment_like_logs WHERE comment_id = ?;  -- ë¶€ëª¨ ì¢‹ì•„ìš” ë¡œê·¸ ì‚­ì œ
DELETE FROM comments WHERE id = ?;  -- ë¶€ëª¨ í•˜ë“œ ì‚­ì œ
```

**ì„±ëŠ¥ ì˜í–¥:**
- âœ… ìì‹ì´ ì—†ëŠ” ê²½ìš° ì¿¼ë¦¬ ìˆ˜ ê°ì†Œ (3ê°œ â†’ 2ê°œ)
- âš ï¸ ìì‹ì´ ìˆëŠ” ê²½ìš° ì¿¼ë¦¬ ìˆ˜ ì¦ê°€ (UPDATE + ìë™ ì •ë¦¬ ì²´í¬)
- âœ… ì „ì²´ì ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ UPDATE ì—°ì‚° ê°ì†Œ
- âœ… ì¡°íšŒ ì¿¼ë¦¬ ì„±ëŠ¥ í–¥ìƒ (ì‚­ì œëœ ë°ì´í„°ê°€ ì‹¤ì œë¡œ ì œê±°ë¨)

**íŠ¸ëœì­ì…˜ ì²˜ë¦¬:**
- `@Transactional` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì›ìì„± ë³´ì¥
- ëª¨ë“  ì¿¼ë¦¬ê°€ ì„±ê³µí•˜ê±°ë‚˜ ëª¨ë‘ ë¡¤ë°±

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ê³ ë ¤ì‚¬í•­

### ì˜í–¥ë°›ëŠ” í…Œì´ë¸”

#### 1. `post_like_logs` / `post_dislike_logs` í…Œì´ë¸”
- **ë³€ê²½ ì—†ìŒ** (ê¸°ì¡´ êµ¬ì¡° ìœ ì§€)
- ë¡œê·¸ ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€ (í† ê¸€ ì‹œ)
- ì¸ë±ìŠ¤ ìµœì í™” ê¶Œì¥

#### 2. `comment_like_logs` í…Œì´ë¸”
- **ë³€ê²½ ì—†ìŒ**
- `deleteByCommentId()` ë©”ì„œë“œë¡œ cascade ì‚­ì œ ì²˜ë¦¬

#### 3. `comments` í…Œì´ë¸”
- **ë³€ê²½ ì—†ìŒ**
- `is_deleted` ì»¬ëŸ¼ í™œìš© (ì†Œí”„íŠ¸ ì‚­ì œ)
- `parent_id` ì»¬ëŸ¼ì€ nullable ìœ ì§€

---

## ë¡¤ë°± ê°€ì´ë“œ

ë¬¸ì œ ë°œìƒ ì‹œ ì´ì „ ë²„ì „ìœ¼ë¡œ ë˜ëŒë¦¬ëŠ” ë°©ë²•:

### Gitì„ ì´ìš©í•œ ë¡¤ë°±
```bash
# ë³€ê²½ëœ íŒŒì¼ ëª©ë¡ í™•ì¸
git log --oneline
git show <commit_hash>

# íŠ¹ì • ì»¤ë°‹ìœ¼ë¡œ ë¡¤ë°±
git revert <commit_hash>
git push

# ë˜ëŠ” ê°œë³„ íŒŒì¼ë§Œ ë³µì›
git checkout <ì´ì „_commit_hash> -- backend/src/main/java/com/ej2/service/PostService.java
git checkout <ì´ì „_commit_hash> -- backend/src/main/java/com/ej2/service/CommentService.java
git checkout <ì´ì „_commit_hash> -- frontend/src/pages/Board/PostDetailPage.js
```

### ê°œë³„ ê¸°ëŠ¥ë³„ ë¡¤ë°± ë°©ë²•

#### 1. ì¢‹ì•„ìš”/ì‹«ì–´ìš” í† ê¸€ë§Œ ë¡¤ë°±
```java
// PostService.javaì˜ incrementLikeCount(), incrementDislikeCount() ë©”ì„œë“œë¥¼
// ì´ì „ ë²„ì „ìœ¼ë¡œ êµì²´ (ì˜êµ¬ 1íšŒ ì œí•œ ë¡œì§ ë³µì›)

// ë³€ê²½ í›„ â†’ ë³€ê²½ ì „:
// - í† ê¸€ ë¡œì§ ì œê±° (ê¸°ì¡´ ë¡œê·¸ ì‚­ì œ ë¶€ë¶„)
// - ìƒí˜¸ë°°íƒ€ ë¡œì§ ì œê±° (ë°˜ëŒ€ ë¡œê·¸ í™•ì¸ ë¶€ë¶„)
// - ë‹¨ìˆœ ì¤‘ë³µ ì²´í¬ë§Œ ìœ ì§€
```

#### 2. ì¡°ê±´ë¶€ ëŒ“ê¸€ ì‚­ì œë§Œ ë¡¤ë°±
```java
// CommentService.javaì˜ deleteComment() ë©”ì„œë“œë¥¼
// ì´ì „ ë²„ì „ìœ¼ë¡œ êµì²´ (ë¬´ì¡°ê±´ í•˜ë“œ ì‚­ì œ + ê³ ì•„í™”)

// ë³€ê²½ í›„ â†’ ë³€ê²½ ì „:
// - hasChildren ë¶„ê¸° ì œê±°
// - ì†Œí”„íŠ¸ ì‚­ì œ ë¡œì§ ì œê±°
// - ìë™ ì •ë¦¬ ë¡œì§ ì œê±°
// - ê³ ì•„í™” ë¡œì§ ë³µì›
```

---

## ê´€ë ¨ ë¬¸ì„œ

- [ê²Œì‹œíŒ CRUD êµ¬í˜„ ê°€ì´ë“œ](./06_ê²Œì‹œíŒ_CRUD_êµ¬í˜„_ê°€ì´ë“œ.md)
- [ëŒ“ê¸€ ê¸°ëŠ¥ êµ¬í˜„ ê°€ì´ë“œ](./07_ëŒ“ê¸€_ê¸°ëŠ¥_êµ¬í˜„_ê°€ì´ë“œ.md)
- [ê²Œì‹œíŒ ë° ëŒ“ê¸€ ê¸°ëŠ¥ ê°œì„  v1](./0210_ê²Œì‹œíŒ_ëŒ“ê¸€_ê¸°ëŠ¥_ê°œì„ .md) (ì´ì „ ë²„ì „)

---

## í–¥í›„ ê°œì„  ì‚¬í•­ ì œì•ˆ

### 1. ì¢‹ì•„ìš”/ì‹«ì–´ìš” ê¸°ëŠ¥
- [x] ì¢‹ì•„ìš” ì·¨ì†Œ ê¸°ëŠ¥ (í† ê¸€) â† **ì™„ë£Œ (v2)**
- [x] ìƒí˜¸ë°°íƒ€ ì²˜ë¦¬ (ì¢‹ì•„ìš” â†” ì‹«ì–´ìš” ì „í™˜) â† **ì™„ë£Œ (v2)**
- [ ] ì¢‹ì•„ìš”í•œ ê²Œì‹œê¸€ ëª©ë¡ ë³´ê¸° ê¸°ëŠ¥
- [ ] ì¢‹ì•„ìš” ìˆ˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (WebSocket)
- [ ] ë°˜ì‘ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼

### 2. ëŒ“ê¸€ ê¸°ëŠ¥
- [x] ì¡°ê±´ë¶€ ì‚­ì œ ì „ëµ (í•˜ë“œ/ì†Œí”„íŠ¸ ìë™ ë¶„ê¸°) â† **ì™„ë£Œ (v2)**
- [x] ì†Œí”„íŠ¸ ì‚­ì œëœ ë¶€ëª¨ ìë™ ì •ë¦¬ â† **ì™„ë£Œ (v2)**
- [ ] ëŒ“ê¸€ ë³µêµ¬ ê¸°ëŠ¥ (íœ´ì§€í†µ)
- [ ] ëŒ“ê¸€ ì •ë ¬ ì˜µì…˜ (ìµœì‹ ìˆœ, ì¢‹ì•„ìš”ìˆœ)
- [ ] ëŒ“ê¸€ í˜ì´ì§€ë„¤ì´ì…˜

### 3. ì„±ëŠ¥ ìµœì í™”
- [ ] ë°˜ì‘(reaction) ìƒíƒœ ìºì‹± (Redux/Context API)
- [ ] ì¢‹ì•„ìš” ë¡œê·¸ í…Œì´ë¸” íŒŒí‹°ì…”ë‹
- [ ] ì‚­ì œëœ ëŒ“ê¸€ ì •ê¸° ì•„ì¹´ì´ë¹™

---

## ì‘ì—… ì´ë ¥

- **ë‚ ì§œ:** 2026-02-10
- **ì‘ì—…ì:** Claude Code
- **ë²„ì „:** v2.0
- **ë³€ê²½ íŒŒì¼ ìˆ˜:** 5ê°œ
  - Frontend: 2ê°œ (PostDetailPage.js, PostDetailPage.css)
  - Backend: 3ê°œ (PostService.java, PostController.java, CommentService.java)
- **ì´ì „ ë²„ì „:** v1.0 (ì¢‹ì•„ìš” 1íšŒ ì œí•œ, íƒ€ì„ìŠ¤íƒ¬í”„ ë³€ê²½, í•˜ë“œ ì‚­ì œ)
- **í˜„ì¬ ë²„ì „:** v2.0 (í† ê¸€ + ìƒí˜¸ë°°íƒ€, ì¡°ê±´ë¶€ ì‚­ì œ, ìë™ ì •ë¦¬)

---

**ë¬¸ì„œ ë²„ì „:** 2.0
**ìµœì¢… ìˆ˜ì •ì¼:** 2026-02-10
