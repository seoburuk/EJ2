{"ast":null,"code":"import { TickerStrategy } from './types.js';\nexport class Ticker {\n  constructor(_interval, _strategy = TickerStrategy.Interval, _debug) {\n    this._interval = _interval;\n    this._strategy = _strategy;\n    this._debug = _debug;\n    this._workerScript = `\n    var startTime = Date.now();\n    setInterval(function() {\n        self.postMessage(Date.now() - startTime);\n    }, ${this._interval});\n  `;\n  }\n  start(tick) {\n    this.stop();\n    if (this.shouldUseWorker()) {\n      this.runWorker(tick);\n    } else {\n      this.runInterval(tick);\n    }\n  }\n  stop() {\n    this.disposeWorker();\n    this.disposeInterval();\n  }\n  shouldUseWorker() {\n    return typeof Worker !== 'undefined' && this._strategy === TickerStrategy.Worker;\n  }\n  runWorker(tick) {\n    this._debug('Using runWorker for outgoing pings');\n    if (!this._worker) {\n      this._worker = new Worker(URL.createObjectURL(new Blob([this._workerScript], {\n        type: 'text/javascript'\n      })));\n      this._worker.onmessage = message => tick(message.data);\n    }\n  }\n  runInterval(tick) {\n    this._debug('Using runInterval for outgoing pings');\n    if (!this._timer) {\n      const startTime = Date.now();\n      this._timer = setInterval(() => {\n        tick(Date.now() - startTime);\n      }, this._interval);\n    }\n  }\n  disposeWorker() {\n    if (this._worker) {\n      this._worker.terminate();\n      delete this._worker;\n      this._debug('Outgoing ping disposeWorker');\n    }\n  }\n  disposeInterval() {\n    if (this._timer) {\n      clearInterval(this._timer);\n      delete this._timer;\n      this._debug('Outgoing ping disposeInterval');\n    }\n  }\n}","map":{"version":3,"names":["TickerStrategy","Ticker","constructor","_interval","_strategy","Interval","_debug","_workerScript","start","tick","stop","shouldUseWorker","runWorker","runInterval","disposeWorker","disposeInterval","Worker","_worker","URL","createObjectURL","Blob","type","onmessage","message","data","_timer","startTime","Date","now","setInterval","terminate","clearInterval"],"sources":["C:\\Users\\admin\\Desktop\\EJ2\\frontend\\node_modules\\@stomp\\stompjs\\src\\ticker.ts"],"sourcesContent":["import { debugFnType, TickerStrategy } from './types.js';\r\n\r\nexport class Ticker {\r\n  private readonly _workerScript = `\r\n    var startTime = Date.now();\r\n    setInterval(function() {\r\n        self.postMessage(Date.now() - startTime);\r\n    }, ${this._interval});\r\n  `;\r\n\r\n  private _worker?: Worker;\r\n  private _timer?: any;\r\n\r\n  constructor(\r\n    private readonly _interval: number,\r\n    private readonly _strategy = TickerStrategy.Interval,\r\n    private readonly _debug: debugFnType,\r\n  ) {}\r\n\r\n  public start(tick: (elapsedTime: number) => void): void {\r\n    this.stop();\r\n\r\n    if (this.shouldUseWorker()) {\r\n      this.runWorker(tick);\r\n    } else {\r\n      this.runInterval(tick);\r\n    }\r\n  }\r\n\r\n  public stop(): void {\r\n    this.disposeWorker();\r\n    this.disposeInterval();\r\n  }\r\n\r\n  private shouldUseWorker(): boolean {\r\n    return (\r\n      typeof Worker !== 'undefined' && this._strategy === TickerStrategy.Worker\r\n    );\r\n  }\r\n\r\n  private runWorker(tick: (elapsedTime: number) => void): void {\r\n    this._debug('Using runWorker for outgoing pings');\r\n    if (!this._worker) {\r\n      this._worker = new Worker(\r\n        URL.createObjectURL(\r\n          new Blob([this._workerScript], { type: 'text/javascript' }),\r\n        ),\r\n      );\r\n      this._worker.onmessage = message => tick(message.data);\r\n    }\r\n  }\r\n\r\n  private runInterval(tick: (elapsedTime: number) => void): void {\r\n    this._debug('Using runInterval for outgoing pings');\r\n    if (!this._timer) {\r\n      const startTime = Date.now();\r\n      this._timer = setInterval(() => {\r\n        tick(Date.now() - startTime);\r\n      }, this._interval);\r\n    }\r\n  }\r\n\r\n  private disposeWorker(): void {\r\n    if (this._worker) {\r\n      this._worker.terminate();\r\n      delete this._worker;\r\n      this._debug('Outgoing ping disposeWorker');\r\n    }\r\n  }\r\n\r\n  private disposeInterval(): void {\r\n    if (this._timer) {\r\n      clearInterval(this._timer);\r\n      delete this._timer;\r\n      this._debug('Outgoing ping disposeInterval');\r\n    }\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAAsBA,cAAc,QAAQ,YAAY;AAExD,OAAM,MAAOC,MAAM;EAWjBC,YACmBC,SAAiB,EACjBC,SAAA,GAAYJ,cAAc,CAACK,QAAQ,EACnCC,MAAmB;IAFnB,KAAAH,SAAS,GAATA,SAAS;IACT,KAAAC,SAAS,GAATA,SAAS;IACT,KAAAE,MAAM,GAANA,MAAM;IAbR,KAAAC,aAAa,GAAG;;;;SAI1B,IAAI,CAACJ,SAAS;GACpB;EASE;EAEIK,KAAKA,CAACC,IAAmC;IAC9C,IAAI,CAACC,IAAI,EAAE;IAEX,IAAI,IAAI,CAACC,eAAe,EAAE,EAAE;MAC1B,IAAI,CAACC,SAAS,CAACH,IAAI,CAAC;IACtB,CAAC,MAAM;MACL,IAAI,CAACI,WAAW,CAACJ,IAAI,CAAC;IACxB;EACF;EAEOC,IAAIA,CAAA;IACT,IAAI,CAACI,aAAa,EAAE;IACpB,IAAI,CAACC,eAAe,EAAE;EACxB;EAEQJ,eAAeA,CAAA;IACrB,OACE,OAAOK,MAAM,KAAK,WAAW,IAAI,IAAI,CAACZ,SAAS,KAAKJ,cAAc,CAACgB,MAAM;EAE7E;EAEQJ,SAASA,CAACH,IAAmC;IACnD,IAAI,CAACH,MAAM,CAAC,oCAAoC,CAAC;IACjD,IAAI,CAAC,IAAI,CAACW,OAAO,EAAE;MACjB,IAAI,CAACA,OAAO,GAAG,IAAID,MAAM,CACvBE,GAAG,CAACC,eAAe,CACjB,IAAIC,IAAI,CAAC,CAAC,IAAI,CAACb,aAAa,CAAC,EAAE;QAAEc,IAAI,EAAE;MAAiB,CAAE,CAAC,CAC5D,CACF;MACD,IAAI,CAACJ,OAAO,CAACK,SAAS,GAAGC,OAAO,IAAId,IAAI,CAACc,OAAO,CAACC,IAAI,CAAC;IACxD;EACF;EAEQX,WAAWA,CAACJ,IAAmC;IACrD,IAAI,CAACH,MAAM,CAAC,sCAAsC,CAAC;IACnD,IAAI,CAAC,IAAI,CAACmB,MAAM,EAAE;MAChB,MAAMC,SAAS,GAAGC,IAAI,CAACC,GAAG,EAAE;MAC5B,IAAI,CAACH,MAAM,GAAGI,WAAW,CAAC,MAAK;QAC7BpB,IAAI,CAACkB,IAAI,CAACC,GAAG,EAAE,GAAGF,SAAS,CAAC;MAC9B,CAAC,EAAE,IAAI,CAACvB,SAAS,CAAC;IACpB;EACF;EAEQW,aAAaA,CAAA;IACnB,IAAI,IAAI,CAACG,OAAO,EAAE;MAChB,IAAI,CAACA,OAAO,CAACa,SAAS,EAAE;MACxB,OAAO,IAAI,CAACb,OAAO;MACnB,IAAI,CAACX,MAAM,CAAC,6BAA6B,CAAC;IAC5C;EACF;EAEQS,eAAeA,CAAA;IACrB,IAAI,IAAI,CAACU,MAAM,EAAE;MACfM,aAAa,CAAC,IAAI,CAACN,MAAM,CAAC;MAC1B,OAAO,IAAI,CAACA,MAAM;MAClB,IAAI,CAACnB,MAAM,CAAC,+BAA+B,CAAC;IAC9C;EACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}